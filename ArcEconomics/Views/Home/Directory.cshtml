@model ArcEconomics.ViewModels.DirectoryViewModel

<section id="dropbox-explorer" class="panel panel-default">
    <div class="panel-heading">

        @Html.Partial("_Breadcrumb", Model)

    </div>
    <div class="panel-body">

        @{

            int fileCount = Model.CurrentDropBoxDirectory.ChildFiles.Count();
            int dirCount = Model.CurrentDropBoxDirectory.ChildDirectories.Count();

        }

        @if (fileCount + dirCount == 0)
        {
            <p>This folder is empty.</p>
        }
        else
        {

            if (fileCount > 0)
            {
                <ul class="list-unstyled">
                    @foreach (ArcEconomics.Models.DropBoxFile file in Model.CurrentDropBoxDirectory.ChildFiles)
                    {
                        <li>
                            @MyHelpers.FileActionLink(@file.Name, @file.PublicUrl)
                        </li>
                    }
                </ul>
            }

            if (dirCount > 0)
            {
                <ul class="list-unstyled">
                    @foreach (ArcEconomics.Models.DropBoxDirectory dir in Model.CurrentDropBoxDirectory.ChildDirectories)
                    {
                        <li>
                            @MyHelpers.DirectoryActionLink(@dir.Name, "Directory", new { controller = "Home", path = dir.Path }, this as WebViewPage)
                        </li>
                    }
                </ul>
            }
        }
    </div>
</section>